# shopify-estimated-delivery-date

Shopify で配送予定日を表示するためのアプリ

## 要件

管理者側が以下を設定できるようにする

- 注文から何日後に発送できるか
- 日本のエリアで発送から何日くらいかかるか
- 発送作業ができない日(土日・祝日・その他)

Shopify サイトを訪問した顧客には以下が表示される

- 何月何日に商品が到着するか

- ユーザーの場所をIPアドレスから推定して、配送時間を計算
- 3大郵便

## メモ

- 「台風で遅延するかもしれないという情報を載せるのが面倒だった」とのこと
- 台風は仕方ないとユーザーも思うかもしれない
- 普段雪が降らない地域や西側の積雪の影響を考慮できるか

## 残り実装

1. Shopifyストアフロント連携
   顧客側での配送予定日表示機能（現在は管理画面のみ実装済み）
   IPアドレスベースの地域推定機能
   Theme App Extension または Checkout Extension の実装
2. 地域推定ロジック
   IPアドレスから都道府県を推定するAPI連携
   ブラウザの位置情報APIによる地域取得（オプション）
3. API機能の拡充
   api.calculate-delivery.tsxが管理画面認証を要求しているため、顧客向けの公開APIエンドポイントが必要
   Storefront API経由でのアクセス対応
4. Shopify App Extensions
   extensions/ ディレクトリが空なので、以下の実装が必要:
   Theme App Extension（商品ページに配送予定日を表示）
   Checkout UI Extension（チェックアウト画面での表示）

## その他

年をまたぐ祝日データの自動更新機能（現在は2025年のみハードコード）
管理画面UIの改善（app.settings.tsx:116-121に「今後の機能」として記載されているが、実際には実装済み）
